<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<title>Coraz贸n que explota</title>
<style>
  body { margin:0; background:black; overflow:hidden; }
  canvas { display:block; }
</style>
</head>
<body>

<canvas id="canvas"></canvas>

<script>
const canvas = document.getElementById("canvas");
const ctx = canvas.getContext("2d");

canvas.width = window.innerWidth;
canvas.height = window.innerHeight;

// 憋 Tiempo total de construcci贸n
const BUILD_TIME = 10000; // 10 segundos
let startTime = Date.now();
let exploded = false;

// わ funci贸n coraz贸n
function heart(t) {
  return {
    x: 16 * Math.pow(Math.sin(t), 3),
    y: -(13 * Math.cos(t) - 5 * Math.cos(2*t) - 2 * Math.cos(3*t) - Math.cos(4*t))
  };
}

// Part铆culas objetivo
let target = [];
for (let i = 0; i < 2000; i++) {
  let t = Math.random() * Math.PI * 2;
  let h = heart(t);
  target.push({
    tx: h.x * 10,
    ty: h.y * 10
  });
}

// Part铆culas reales
let particles = target.map(p => ({
  x: 0,
  y: 0,
  vx: 0,
  vy: 0
}));

function draw() {
  ctx.clearRect(0,0,canvas.width,canvas.height);
  ctx.save();
  ctx.translate(canvas.width/2, canvas.height/2);

  let elapsed = Date.now() - startTime;
  let progress = Math.min(elapsed / BUILD_TIME, 1);

  particles.forEach((p, i) => {

    if (!exploded) {
      //  Construcci贸n progresiva
      p.x += (target[i].tx - p.x) * 0.05 * progress;
      p.y += (target[i].ty - p.y) * 0.05 * progress;

      if (progress === 1 && !exploded) {
        exploded = true;
        particles.forEach(p => {
          p.vx = (Math.random() - 0.5) * 15;
          p.vy = (Math.random() - 0.5) * 15;
        });
      }
    } else {
      //  Explosi贸n
      p.x += p.vx;
      p.y += p.vy;
      p.vy += 0.1; // gravedad suave
    }

    ctx.fillStyle = exploded
      ? "rgba(255,80,80,0.8)"
      : "rgba(0,255,180,0.9)";

    ctx.beginPath();
    ctx.arc(p.x, p.y, 1.6, 0, Math.PI*2);
    ctx.fill();
  });

  ctx.restore();
  requestAnimationFrame(draw);
}

draw();
</script>
</body>
</html>
