<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<title>Coraz√≥n granulado</title>
<style>
  body { margin:0; background:black; overflow:hidden; }
  canvas { display:block; }
</style>
</head>
<body>

<canvas id="canvas"></canvas>

<script>
const canvas = document.getElementById("canvas");
const ctx = canvas.getContext("2d");

canvas.width = window.innerWidth;
canvas.height = window.innerHeight;

const BUILD_TIME = 10000;
const PARTICLES = 3000;
let startTime = Date.now();

// üíú Coraz√≥n (solo borde)
function heart(t) {
  return {
    x: 16 * Math.pow(Math.sin(t), 3),
    y: -(13 * Math.cos(t) - 5 * Math.cos(2*t) - 2 * Math.cos(3*t) - Math.cos(4*t))
  };
}

// Targets SOLO en el contorno
let targets = [];
for (let i = 0; i < PARTICLES; i++) {
  let t = Math.random() * Math.PI * 2;
  let h = heart(t);
  targets.push({
    x: h.x * 11,
    y: h.y * 11
  });
}

// Part√≠culas
let particles = targets.map(t => ({
  x: Math.random() * canvas.width - canvas.width / 2,
  y: -Math.random() * canvas.height,
  tx: t.x,
  ty: t.y,
  vy: Math.random() * 1.2 + 0.3
}));

function draw() {
  ctx.clearRect(0,0,canvas.width,canvas.height);
  ctx.save();
  ctx.translate(canvas.width/2, canvas.height/2);

  let elapsed = Date.now() - startTime;
  let progress = Math.min(elapsed / BUILD_TIME, 1);

  particles.forEach(p => {
    // üåßÔ∏è ca√≠da inicial
    if (progress < 1) {
      p.y += p.vy;
    }

    // üß≤ atracci√≥n MUY SUAVE al borde
    p.x += (p.tx - p.x) * 0.02 * progress;
    p.y += (p.ty - p.y) * 0.02 * progress;

    // ‚ú® vibraci√≥n leve (granulado)
    p.x += (Math.random() - 0.5) * 0.15;
    p.y += (Math.random() - 0.5) * 0.15;

    ctx.fillStyle = "rgba(220,150,255,0.85)"; // üíú lila
    ctx.beginPath();
    ctx.arc(p.x, p.y, 1.2, 0, Math.PI * 2);
    ctx.fill();
  });

  ctx.restore();
  requestAnimationFrame(draw);
}

draw();
</script>
</body>
</html>
